# Инструкция для операционной системы Lubuntu 22.04 LTS

Все команды в данной инструкции необходимо выполнять по очереди  
Одна строка = одна команда

# Настройка

## **Этап настройки выполняется один раз**

## Все действия необходимо выполнять терминале от имени root
Чтобы перейти в режим root необходимо выполнить команду:
```shell
sudo su
```
И ввести пароль

## Далее нужно по очереди выполнить команды:
```shell
apt install git gcc make
cd ~/
git clone https://github.com/Lora-net/sx1302_hal.git
cd ~/sx1302_hal
make
cd ~/sx1302_hal/packet_forwarder
```

## Далее нужно скачать конфигурационный файл для региона RU864:
```shell
wget https://raw.githubusercontent.com/OEM-RnD/LW-USB-GateWay/main/files/global_conf.json
```

## После этого нужно подключить мини базовую станцию к ПК и ввести следующую команду:
```shell
dmesg | grep tty
```
в самой нижней строчке будет запись ttyACMx, которая потребуется для настройки конфигурационного файла  
где x - номер подключенного устройства  


## Конфигурационный файл необходимо настроить, открыв его с помощью любого редактора, например nano:
```shell
nano global_conf.json.sx1250.RU864.USB
```

### В строке:
```json
"com_path": "/dev/ttyACM0"
```
необходимо изменить номер подключенного устройства на полученный ранее

### В строке:
```json
"gateway_ID": "1234567812345678",
```
необходимо задать gateway ID (hex строка 8 байт)

### В строках:
```json
"server_address": "127.0.0.1",
"serv_port_up": 1700,
"serv_port_down": 1700,
```
соответственно задать адрес сервера, и порты

### После завершения настройки:
* нажать комбинацию клавиш Ctrl+S для сохранения изменений
* нажать комбинацию клавиш Ctrl+X для выхода из редактора

## Настройка завершена

---
---
# Запуск
Запустить packet_forwarder командами:
```shell
cd ~/sx1302_hal/packet_forwarder
sudo ./lora_pkt_fwd
```